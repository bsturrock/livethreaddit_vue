(function(e){function t(t){for(var c,a,i=t[0],l=t[1],u=t[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(c in l)Object.prototype.hasOwnProperty.call(l,c)&&(e[c]=l[c]);s&&s(t);while(p.length)p.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],c=!0,i=1;i<n.length;i++){var l=n[i];0!==o[l]&&(c=!1)}c&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var c={},o={app:0},r=[];function a(t){if(c[t])return c[t].exports;var n=c[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=c,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)a.d(n,c,function(t){return e[t]}.bind(null,c));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var s=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0e81":function(e,t,n){},"1ee5":function(e,t,n){"use strict";n("2ac2")},"24fc":function(e,t,n){"use strict";n("6f1c")},"273c":function(e,t,n){"use strict";n("7929")},"2ac2":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var c=n("7a23");function o(e,t){var n=Object(c["u"])("router-view");return Object(c["p"])(),Object(c["d"])(n)}n("cf37");const r={};r.render=o;var a=r,i=n("6c02"),l=Object(c["g"])("link",{href:"https://fonts.googleapis.com/css2?family=Megrim&family=Nunito&family=Share+Tech+Mono&display=swap",rel:"stylesheet"},null,-1),u=Object(c["g"])("button",{class:"search-button noselect"},"GO",-1);function s(e,t,n,o,r,a){var i=Object(c["u"])("Nav");return Object(c["p"])(),Object(c["d"])(c["a"],null,[l,Object(c["g"])(i,{onLogin:o.handleLoginClick,onLogout:o.handleLogoutClick,logged_in:o.logged_in,mode:!1},null,8,["onLogin","onLogout","logged_in"]),Object(c["g"])("form",{onSubmit:t[3]||(t[3]=Object(c["D"])((function(){return o.handleForm&&o.handleForm.apply(o,arguments)}),["prevent"])),class:"search-form"},[Object(c["C"])(Object(c["g"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.search_content=e}),onMousedown:t[2]||(t[2]=function(){return o.handleInputClick&&o.handleInputClick.apply(o,arguments)}),class:"search",type:"text"},null,544),[[c["y"],o.search_content]]),u],32)],64)}n("d3b7"),n("ac1f"),n("466d"),n("1276"),n("96cf");var d=n("1da1"),p={class:"menu"},b={class:"left-menu"},m=Object(c["f"])("liveTHREADDIT"),f={class:"center-menu"},h={class:"right-menu"},O={key:0,class:"menu-item icon noselect"},j={key:0,class:"fas fa-bell"},v={key:1,class:"far fa-bell"},g={key:1,class:"menu-item icon"},y=Object(c["g"])("i",{class:"fas fa-cog"},null,-1),k=Object(c["g"])("i",{class:"fas fa-user"},null,-1),_=Object(c["g"])("i",{class:"far fa-user"},null,-1),C=Object(c["g"])("i",{class:"far fa-user"},null,-1);function w(e,t,n,o,r,a){var i=Object(c["u"])("router-link");return Object(c["p"])(),Object(c["d"])("nav",p,[Object(c["g"])("div",b,[Object(c["g"])(i,{to:{name:"Home"},class:"menu-item large noselect"},{default:Object(c["B"])((function(){return[m]})),_:1})]),Object(c["g"])("div",f,[n.title&&n.mode?(Object(c["p"])(),Object(c["d"])("a",{key:0,href:o.titleurl,class:"menu-item noselect"},Object(c["w"])(n.title),9,["href"])):Object(c["e"])("",!0)]),Object(c["g"])("div",h,[n.mode?(Object(c["p"])(),Object(c["d"])("div",O,[n.notification?(Object(c["p"])(),Object(c["d"])("i",j)):Object(c["e"])("",!0),n.notification?Object(c["e"])("",!0):(Object(c["p"])(),Object(c["d"])("i",v))])):Object(c["e"])("",!0),n.mode?(Object(c["p"])(),Object(c["d"])("div",g,[y])):Object(c["e"])("",!0),n.logged_in&&!o.hoveringuser?(Object(c["p"])(),Object(c["d"])("div",{key:2,onMouseenter:t[1]||(t[1]=function(){return o.handleHoverEnter&&o.handleHoverEnter.apply(o,arguments)}),class:"menu-item icon noselect login"},[k],32)):Object(c["e"])("",!0),n.logged_in&&o.hoveringuser?(Object(c["p"])(),Object(c["d"])("div",{key:3,onClick:t[2]||(t[2]=function(){return o.handleLogoutClick&&o.handleLogoutClick.apply(o,arguments)}),onMouseleave:t[3]||(t[3]=function(){return o.handleHoverLeave&&o.handleHoverLeave.apply(o,arguments)}),class:"menu-item icon noselect login"},[_],32)):Object(c["e"])("",!0),n.logged_in?Object(c["e"])("",!0):(Object(c["p"])(),Object(c["d"])("div",{key:4,onClick:t[4]||(t[4]=function(){return o.handleLoginClick&&o.handleLoginClick.apply(o,arguments)}),class:"menu-item icon noselect"},[C]))])])}var x={props:["title","logged_in","notification","mode","threadid","subreddit"],setup:function(e,t){var n=t.emit,o="https://www.reddit.com/r/"+e.subreddit+"/comments/"+e.threadid+"/",r=Object(c["s"])(!1),a=function(){n("login")},i=function(){r.value=!0},l=function(){r.value=!1},u=function(){n("logout")};return{handleLoginClick:a,handleLogoutClick:u,titleurl:o,hoveringuser:r,handleHoverEnter:i,handleHoverLeave:l}}};n("273c");x.render=w;var L=x,T={name:"Home",components:{Nav:L},setup:function(){var e=Object(c["s"])(!1),t=Object(c["s"])("Enter a Reddit thread..."),n=Object(c["s"])(!0),o=Object(i["c"])(),r=Object(i["d"])(),a=function(){n.value&&(n.value=!1,t.value="")},l=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.cookie="redirect=http://localhost:8080"+o.path,e.next=3,fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({redirect:"http://localhost:8080"+o.path})});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.url,window.location=c;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){document.cookie="user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",s()},s=function(){var t=document.cookie.match("(^|;)\\s*user\\s*=\\s*([^;]+)");e.value=!!t&&t.pop()},p=function(){var e=t.value.split("/");e[4],e[6];r.push({name:"LiveThread",params:{subreddit:e[4],threadid:e[6],temptitle:e[7]}})};return s(),{search_content:t,default_search_value:n,handleInputClick:a,handleLoginClick:l,logged_in:e,checkForLogin:s,handleLogoutClick:u,handleForm:p}}};n("6892");T.render=s;var S=T,R=Object(c["g"])("link",{href:"https://fonts.googleapis.com/css2?family=Megrim&family=Nunito&family=Share+Tech+Mono&display=swap",rel:"stylesheet"},null,-1),N={class:"real-content"},H={key:0,class:"spinner"},P=Object(c["g"])("h2",{class:"spinner_text"},"Loading your liveTHREADDIT",-1),J={class:"spinner_item"},M={key:0,class:"spinner_item_icon far fa-square"},E={key:1,class:"spinner_item_icon far fa-check-square"},B=Object(c["g"])("h2",{class:"spinner_item_text"},"Connecting to Reddit thread",-1),D={class:"spinner_item"},I={key:0,class:"spinner_item_icon far fa-square"},A={key:1,class:"spinner_item_icon far fa-check-square"},q=Object(c["g"])("h2",{class:"spinner_item_text"},"Getting thread details",-1),F={key:2,class:"errorblock"},U=Object(c["g"])("i",{class:"icon-large fas fa-lock"},null,-1),G=Object(c["g"])("h1",null,"THREAD HAS BEEN LOCKED",-1),K=Object(c["f"])("Try a new thread?");function V(e,t,n,o,r,a){var i=Object(c["u"])("Nav"),l=Object(c["u"])("Spinner"),u=Object(c["u"])("CommentBox"),s=Object(c["u"])("router-link");return Object(c["p"])(),Object(c["d"])(c["a"],null,[R,Object(c["g"])("div",N,[Object(c["g"])(i,{onLogin:o.handleLoginClick,onLogout:o.handleLogoutClick,title:o.title,logged_in:o.logged_in,subreddit:n.subreddit,threadid:n.threadid,mode:!0},null,8,["onLogin","onLogout","title","logged_in","subreddit","threadid"]),o.loading_data?Object(c["e"])("",!0):(Object(c["p"])(),Object(c["d"])("div",H,[Object(c["g"])(l),P,Object(c["g"])("div",J,[o.connection?Object(c["e"])("",!0):(Object(c["p"])(),Object(c["d"])("i",M)),o.connection?(Object(c["p"])(),Object(c["d"])("i",E)):Object(c["e"])("",!0),B]),Object(c["g"])("div",D,[o.title?Object(c["e"])("",!0):(Object(c["p"])(),Object(c["d"])("i",I)),o.title?(Object(c["p"])(),Object(c["d"])("i",A)):Object(c["e"])("",!0),q])])),o.loading_data&&!o.lock?(Object(c["p"])(),Object(c["d"])(u,{key:1,onLock:o.handleLock,threadid:n.threadid,logged_in:o.logged_in},null,8,["onLock","threadid","logged_in"])):Object(c["e"])("",!0),o.lock?(Object(c["p"])(),Object(c["d"])("div",F,[U,G,Object(c["g"])(s,{class:"backtohome",to:{name:"Home"}},{default:Object(c["B"])((function(){return[K]})),_:1})])):Object(c["e"])("",!0)])],64)}var z={class:"sk-folding-cube"},Q=Object(c["g"])("div",{class:"sk-cube1 sk-cube"},null,-1),W=Object(c["g"])("div",{class:"sk-cube2 sk-cube"},null,-1),X=Object(c["g"])("div",{class:"sk-cube4 sk-cube"},null,-1),Y=Object(c["g"])("div",{class:"sk-cube3 sk-cube"},null,-1);function Z(e,t,n,o,r,a){return Object(c["p"])(),Object(c["d"])("div",z,[Q,W,X,Y])}var $={};n("d95a");$.render=Z;var ee=$,te={class:"chat"},ne=Object(c["g"])("i",{class:"fas fa-share"},null,-1),ce={key:1,class:"reply-button replying"},oe=Object(c["g"])("i",{class:"fas fa-reply-all"},null,-1);function re(e,t,n,o,r,a){var i=Object(c["u"])("Comment");return Object(c["p"])(),Object(c["d"])(c["a"],null,[Object(c["g"])("div",te,[(Object(c["p"])(!0),Object(c["d"])(c["a"],null,Object(c["t"])(o.shown_comments,(function(e){return Object(c["p"])(),Object(c["d"])(i,{key:e.id,comment:e,clicked_comment:o.clicked_comment,onCommentclick:o.handleCommentClick},null,8,["comment","clicked_comment","onCommentclick"])})),128))]),Object(c["g"])("form",{onSubmit:t[4]||(t[4]=Object(c["D"])((function(){return o.post&&o.post.apply(o,arguments)}),["prevent"])),class:"reply"},[Object(c["C"])(Object(c["g"])("textarea",{ref:"replybox",onKeydown:t[1]||(t[1]=function(e){return o.handleBackSpace(e)}),class:{replying:o.currently_replying},spellcheck:"false","onUpdate:modelValue":t[2]||(t[2]=function(e){return o.usercomment=e})},null,34),[[c["y"],o.usercomment]]),o.currently_replying?Object(c["e"])("",!0):(Object(c["p"])(),Object(c["d"])("button",{key:0,onClick:t[3]||(t[3]=function(){return e.postNonReply&&e.postNonReply.apply(e,arguments)}),class:"reply-button"},[ne])),o.currently_replying?(Object(c["p"])(),Object(c["d"])("button",ce,[oe])):Object(c["e"])("",!0)],32)],64)}n("99af"),n("a15b"),n("fb6a");var ae={class:"timestamp noselect"},ie={class:"comment-content noselect"},le={class:"author"},ue={class:"body"};function se(e,t,n,o,r,a){return Object(c["p"])(),Object(c["d"])("div",{onClick:t[1]||(t[1]=function(){return o.handleCommentClick&&o.handleCommentClick.apply(o,arguments)}),id:n.comment.id,class:[{clicked:o.is_clicked},"comment"]},[Object(c["g"])("div",ae,Object(c["w"])(n.comment.timestamp),1),Object(c["g"])("div",ie,[Object(c["g"])("span",le,Object(c["w"])(n.comment.author)+" "+Object(c["w"])(n.comment.counter)+":",1),Object(c["g"])("span",ue,Object(c["w"])(n.comment.body),1)])],10,["id"])}var de={props:["comment","clicked_comment"],emits:["commentclick"],setup:function(e,t){var n=t.emit,o=Object(c["s"])(!1);Object(c["A"])((function(){e.clicked_comment==e.comment.id?o.value=!0:o.value=!1}));var r=function(){n("commentclick",e.comment)};return{handleCommentClick:r,is_clicked:o}}};n("1ee5");de.render=se;var pe=de,be={components:{Comment:pe},emits:["lock"],props:["logged_in","threadid"],setup:function(e,t){var n=t.emit,o=Object(c["s"])(0),r=Object(c["s"])(""),a=Object(c["s"])(""),i=Object(c["s"])(!1),l=Object(c["s"])(""),u=Object(c["s"])([]),s=Object(c["s"])([]),p=Object(c["s"])([]),b=2e3,m=50,f=Object(c["s"])(!1),h=Object(c["s"])(null),O=(Object(c["s"])(null),Object(c["s"])(null)),j=Object(c["s"])(!1),v=function(e){"Backspace"==e.key&&j.value?(l.value="",j.value=!1):(e.keyCode>=48&&e.keyCode<=57||e.keyCode>=65&&e.keyCode<=90||32==e.keyCode)&&(j.value=!1)},g=Object(c["s"])(Object(c["b"])((function(){var e=5/u.value.length*1e3;return e>=b?e=b:e<=m&&(e=m),e})));Object(c["A"])((function(){""==l.value&&(r.value="",a.value="",i.value=!1,O.value=null),l.value=="@"+r.value+" "&&(j.value=!0)}));var y=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n,c,o,r,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(i.value){t.next=11;break}return n={threadid:e.threadid,body:l.value,user_hash:e.logged_in,reply:!1},t.next=4,fetch("http://127.0.0.1:5000/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return c=t.sent,t.next=7,c.json();case 7:t.sent,l.value="",t.next=22;break;case 11:return o=l.value.split(" "),o=o.slice(1),r=o.join(" "),n={threadid:e.threadid,body:r,user_hash:e.logged_in,reply:!0,replying_to:a.value},t.next=17,fetch("http://127.0.0.1:5000/post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 17:return u=t.sent,t.next=20,u.json();case 20:t.sent,l.value="";case 22:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var c,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.threadid,o.value),t.next=3,fetch("http://127.0.0.1:5000/getcomments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadid:e.threadid,counter:o.value})});case 3:return r=t.sent,t.next=6,r.json();case 6:c=t.sent,"locked"===c.status&&n("lock"),p.value=c.comments,"success"===c.status&&(o.value=c.counter+1,u.value=p.value.concat(u.value),p.value=[]);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),_=function e(){if(f.value)return console.log("clearing timeout"),clearTimeout(x),void(x.value=null);if(0!==u.value.length){var t=u.value.pop();s.value.unshift(t),C(),x.value=setTimeout(e,g.value)}else x.value=setTimeout(e,g.value)},C=function(){s.value.length>100&&s.value.pop()},w=function(e){l.value="@"+e.author+" ",r.value=e.author,a.value=e.id,i.value=!0,O.value=e.id,console.log(O.value),j.value=!0,h.value.focus()},x=Object(c["s"])(setTimeout(_,200)),L=setInterval(k,3500);return Object(c["o"])((function(){console.log("unmounting"),clearInterval(L),f.value=!0})),{comment_queue:u,shown_comments:s,usercomment:l,rate:g,counter:o,handleCommentClick:w,replybox:h,replying_to_user:r,currently_replying:i,replying_to_id:a,post:y,clicked_comment:O,just_reply_info:j,handleBackSpace:v}}};n("6c52");be.render=re;var me=be,fe={name:"LiveThread",props:["subreddit","threadid","temptitle"],components:{Nav:L,Spinner:ee,CommentBox:me},setup:function(e,t){t.emit;var n=Object(c["s"])(!1),o=Object(c["s"])(!1),r=Object(i["c"])(),a=Object(c["s"])(!1),l=Object(c["s"])(""),u=Object(c["s"])(!1),s=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return document.cookie="redirect=http://localhost:8080"+r.path,e.next=3,fetch("http://localhost:5000/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({redirect:"http://localhost:8080"+r.path})});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,c=n.url,window.location=c;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){document.cookie="user=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",b()},b=function(){var e=document.cookie.match("(^|;)\\s*user\\s*=\\s*([^;]+)");n.value=!!e&&e.pop()};b();var m=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://localhost:5000/init",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadid:e.threadid,subreddit:e.subreddit,title:l.value})});case 2:return n=t.sent,t.next=5,n.json();case 5:t.sent,o.value=!0;case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();m();var f=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n,c,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=function(){a.value=!0},t.next=3,fetch("http://localhost:5000/title",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threadid:e.threadid})});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,l.value=c.title,setTimeout(o,2e3);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){u.value=!0};return f(),{handleLoginClick:s,handleLogoutClick:p,logged_in:n,checkForLogin:b,loading_data:a,title:l,connection:o,handleLock:h,lock:u}}};n("24fc");fe.render=V;var he=fe;function Oe(e,t,n,c,o,r){return null}var je={setup:function(){var e=Object(i["d"])();e.go(-2)}};je.render=Oe;var ve=je,ge=[{path:"/",name:"Home",component:S},{path:"/r/:subreddit/comments/:threadid/:temptitle/",name:"LiveThread",component:he,props:!0},{path:"/redirect",name:"Redirect",component:ve}],ye=Object(i["a"])({history:Object(i["b"])("/"),routes:ge}),ke=ye;Object(c["c"])(a).use(ke).mount("#app")},6892:function(e,t,n){"use strict";n("b8b7")},"6c52":function(e,t,n){"use strict";n("9d93")},"6f1c":function(e,t,n){},7929:function(e,t,n){},"9d93":function(e,t,n){},b8b7:function(e,t,n){},ba9d:function(e,t,n){},cf37:function(e,t,n){"use strict";n("ba9d")},d95a:function(e,t,n){"use strict";n("0e81")}});
//# sourceMappingURL=app.4c392697.js.map